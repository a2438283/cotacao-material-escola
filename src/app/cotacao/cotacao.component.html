<app-mensagem-modal
  [show]="modal.show"
  [content]="modal"
  (closeEvent)="onCloseModal()"
>
</app-mensagem-modal>
<div class="container contact">
  <br />
  <br />
  <br />
  <h5>Cadastro de Cotações</h5>
  <hr />

  <div class="container contact">
    <div class="row">
      <form class="col s12" #form="ngForm" (submit)="onSubmit()">
        <div class="row">
          <div class="input-field col s12">
            <input
              id="input-descricao"
              name="input-descricao"
              type="text"
              class="validade"
              [(ngModel)]="this.cotacao.descricao"
              pattern="^[a-zA-ZÀ-ÿ\s]+$"
              #descricao="ngModel"
              required
            />
            <label for="input-name">Descrição *</label>
            <div
              class="red-text"
              [hidden]="descricao.valid || descricao.untouched"
            >
              Por favor, informe a descrição do item.
            </div>
            <span
              class="helper-text"
              data-error="O campo é inválido"
              data-success="Ok!"
            ></span>
          </div>
        </div>

        <table class="highlight">
          <thead>
            <tr>
              <th>Item</th>
              <th class="text-right">Quantidade</th>
              <th class="text-right">Preço</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let item of produtos"
              [ngClass]="{
                invalid: item.preco <= 0
              }"
            >
              <td>{{ item.descricao | titlecase }}</td>
              <td class="text-right">
                {{ item.quantidade | number : "1.2-2" }}
              </td>
              <td class="text-right">
                <input
                  id="input-preco"
                  name="input-preco"
                  type="number"
                  [(ngModel)]="item.preco"
                />
              </td>
            </tr>
          </tbody>
        </table>

        <button
          class="btn waves-effect waves-light amber darken-4"
          type="submit"
          [disabled]="!form.valid"
        >
          Cadastrar
          <i class="material-icons right">send</i>
        </button>

        <button
          style="margin-left: 10px"
          class="btn waves-effect waves-light amber darken-4"
          type="button"
          (click)="onResetClick()"
        >
          Apagar
          <i class="material-icons right">send</i>
        </button>
      </form>

      <p>descricao: {{ this.cotacao.descricao }}</p>
    </div>
  </div>

  <div class="row">
    <div class="col s12 m6 offset-m3 center">
      <a href="/index.html"> VOLTAR AO MENU PRINCIPAL </a>
    </div>
  </div>
  <!-- link home -->
</div>
